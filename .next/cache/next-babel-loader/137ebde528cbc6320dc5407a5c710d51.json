{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\phili\\\\Projetos\\\\MAmanager\\\\pages\\\\compras\\\\addCompra.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\n\nvar addCompra = function addCompra(props) {\n  _s();\n\n  var _useFormik = useFormik({\n    initialValues: {\n      description: '',\n      price: '',\n      date: ''\n    },\n    validationSchema: Yup.object({\n      description: Yup.string().required('Obrigatório'),\n      price: Yup.number().required('Obrigatório'),\n      date: Yup.date().required('Obrigatório')\n    }),\n    onSubmit: function onSubmit(values) {\n      salvarCompra(values, props.user.email);\n      alert(\"Compra \".concat(values.description, \" salva com sucesso!\"));\n    }\n  }),\n      handleSubmit = _useFormik.handleSubmit,\n      handleChange = _useFormik.handleChange,\n      values = _useFormik.values,\n      touched = _useFormik.touched,\n      errors = _useFormik.errors;\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"conteudo\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Registar Compra\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"description\",\n          children: \"Descri\\xE7\\xE3o: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: values.description,\n          onChange: handleChange,\n          type: \"text\",\n          id: \"description\",\n          name: \"description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 11\n        }, _this), touched.description && errors.description ? /*#__PURE__*/_jsxDEV(\"text\", {\n          children: errors.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 13\n        }, _this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"price\",\n          children: \"Valor: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: values.price,\n          onChange: handleChange,\n          type: \"text\",\n          id: \"price\",\n          name: \"price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, _this), touched.price && errors.price ? /*#__PURE__*/_jsxDEV(\"text\", {\n          children: errors.price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 44\n        }, _this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"date\",\n          children: \"Data: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: values.date,\n          onChange: handleChange,\n          type: \"date\",\n          id: \"date\",\n          name: \"date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, _this), touched.date && errors.date ? /*#__PURE__*/_jsxDEV(\"text\", {\n          children: errors.date\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 43\n        }, _this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Enviar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(addCompra, \"G2gPppaHxabIZCEXmdxIpxNZY1g=\", false, function () {\n  return [useFormik];\n});\n\nexport var __N_SSP = true;\nexport default addCompra;\n\nvar salvarCompra = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(despesa, email) {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(despesa);\n            console.log(email);\n            _context.next = 4;\n            return fetch('http://localhost:3001/graphql', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                Accept: 'application/json',\n                Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnQiOiJmcm9udC1lbmQtS2U0Z3JnNzRocjRkY2I2IiwiaWF0IjoxNTk3ODU3NTg2fQ.MVQIQxXkVgbhCFzYRwIiAtJZHbYN0UqiJGBndMLKAGY'\n              },\n              body: JSON.stringify({\n                query: \"mutation{\\n        createCompra(user:\\\"\".concat(email, \"\\\", input: {\\n          description: \\\"\").concat(despesa.description, \"\\\"\\n          price: \").concat(despesa.price, \", \\n          date: \\\"\").concat(despesa.date, \"\\\", \\n        }){\\n          id\\n          description\\n        }\\n      }\")\n              })\n            });\n\n          case 4:\n            data = _context.sent;\n            console.log(data);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function salvarCompra(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["C:/Users/phili/Projetos/MAmanager/pages/compras/addCompra.js"],"names":["React","useFormik","Yup","addCompra","props","initialValues","description","price","date","validationSchema","object","string","required","number","onSubmit","values","salvarCompra","user","email","alert","handleSubmit","handleChange","touched","errors","despesa","console","log","fetch","method","headers","Accept","Authorization","body","JSON","stringify","query","data"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport auth0 from '../../lib/auth0'\r\nimport { useFormik } from 'formik'\r\nimport * as Yup from 'yup'\r\n\r\nconst addCompra = (props) => {\r\n  const { handleSubmit, handleChange, values, touched, errors } = useFormik({\r\n    initialValues: {\r\n      description: '',\r\n      price: '',\r\n      date: ''\r\n    },\r\n    validationSchema: Yup.object({\r\n      description: Yup.string().required('Obrigatório'),\r\n      price: Yup.number().required('Obrigatório'),\r\n      date: Yup.date().required('Obrigatório')\r\n    }),\r\n    onSubmit: (values) => {\r\n      salvarCompra(values, props.user.email)\r\n      alert(`Compra ${values.description} salva com sucesso!`)\r\n    },\r\n  })\r\n\r\n  return (\r\n    <div className=\"conteudo\">\r\n      <h2>Registar Compra</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          <label htmlFor=\"description\">Descrição: </label>\r\n          <input\r\n            value={values.description}\r\n            onChange={handleChange}\r\n            type=\"text\"\r\n            id=\"description\"\r\n            name=\"description\"\r\n          />\r\n          {touched.description && errors.description ? (\r\n            <text>{errors.description}</text>\r\n          ) : null}\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"price\">Valor: </label>\r\n          <input\r\n            value={values.price}\r\n            onChange={handleChange}\r\n            type=\"text\"\r\n            id=\"price\"\r\n            name=\"price\"\r\n          />\r\n          {touched.price && errors.price ? <text>{errors.price}</text> : null}\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"date\">Data: </label>\r\n          <input\r\n            value={values.date}\r\n            onChange={handleChange}\r\n            type=\"date\"\r\n            id=\"date\"\r\n            name=\"date\"\r\n          />\r\n          {touched.date && errors.date ? (<text>{errors.date}</text>) : null}\r\n        </div>\r\n        <input type=\"submit\" value=\"Enviar\"></input>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default addCompra\r\n\r\nexport async function getServerSideProps({ req, res }) {\r\n  const session = await auth0.getSession(req)\r\n  if (session) {\r\n    return {\r\n      props: {\r\n        user: session.user,\r\n      },\r\n    }\r\n  }\r\n  return {\r\n    props: {\r\n      user: 'Usuário não logado',\r\n      data: 'Dados inacessíveis',\r\n    },\r\n  }\r\n}\r\n\r\nconst salvarCompra = async (despesa, email) => {\r\n  console.log(despesa)\r\n  console.log(email)\r\n  const data = await fetch('http://localhost:3001/graphql', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Accept: 'application/json',\r\n      Authorization:\r\n        'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnQiOiJmcm9udC1lbmQtS2U0Z3JnNzRocjRkY2I2IiwiaWF0IjoxNTk3ODU3NTg2fQ.MVQIQxXkVgbhCFzYRwIiAtJZHbYN0UqiJGBndMLKAGY',\r\n    },\r\n    body: JSON.stringify({\r\n      query: `mutation{\r\n        createCompra(user:\"${email}\", input: {\r\n          description: \"${despesa.description}\"\r\n          price: ${despesa.price}, \r\n          date: \"${despesa.date}\", \r\n        }){\r\n          id\r\n          description\r\n        }\r\n      }`,\r\n    }),\r\n  })\r\n  console.log(data)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}